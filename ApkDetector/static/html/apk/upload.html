
<div class="row">
    <div ng-file-drop ng-model="files" class="drop-box col-sm-8 col-sm-offset-2"
         style="height: 250px; padding-top: 120px; margin-bottom: 30px"
         drag-over-class="dragover" ng-multiple="false" allow-dir="false"
        accept=".apk">Drop APK File here</div>


    <input  class="btn btn-success col-sm-2 col-sm-offset-1" ng-file-select
           style="text-align: center" type="file" name="fileName1" id="fileName1"/>
    <div class="btn btn-primary col-sm-2 col-sm-offset-2"
         style="text-align: center" >
        <i class="glyphicon glyphicon-upload"></i>
        <input style= "background-color:transparent;border:0;" type="button" onclick="sendToUser()" id="sendToUser" value="提交" />
    </div>



    <div class="btn btn-primary col-sm-2 col-sm-offset-2"
         style="text-align: center" ng-click="start()">
        <i class="glyphicon glyphicon-upload"></i>
        <span>开始上传</span>
    </div>


    <div class="btn btn-warning col-sm-2 col-sm-offset-2"
         style="text-align: center" ng-click="cancel()">
        <i class="glyphicon glyphicon-ban-circle"></i>
        <span>取消上传</span>
    </div>
    <div class="col-sm-2 col-sm-offset-3">
        <select style="height: 30px" ng-model="apkType" class="form-control">
            <option value=3 >请选择样本类型</option>
            <option value=0>训练样本</option>
            <option value=1>测试样本</option>
        </select>
    </div>
    <div class="col-sm-2 col-sm-offset-2">
        <select style="height: 30px" ng-model="level" class="form-control">
            <option value=4 >请选择风险等级</option>
            <option value=0>正常</option>
            <option value=1>恶意</option>
            <option value=2>中危</option>
            <option value=3>高危</option>
        </select>
    </div>

</div>
<br>
<br>
<br>
<div class="row">
    <div id="terminal" class="well col-sm-8 col-sm-offset-2" style="border: none;
    background-color: #000000; padding: 10px;overflow-y: scroll;
    color: green; height: 400px; word-break: break-all">

    </div>
</div>
<script>
        function sendToUser(){ //在这里进行ajax 文件上传 用户的信息
                    var $file1 = $("input[name='fileName1']").val();//用户文件内容(文件)
                    // 判断文件是否为空
                    if ($file1 == "") {
                        alert("请选择上传的目标文件! ")
                        return false;
                    }
                    //判断文件大小
                    var size1 = $("input[name='fileName1']")[0].files[0].size;
                    if (size1>104857600) {
                        alert("上传文件不能大于100M!");
                        return false;
                    }

                    boo1 = true;
                var type = "file";
                var formData = new FormData();//这里需要实例化一个FormData来进行文件上传
                formData.append(type,$("#fileName1")[0].files[0]);
                //多文件上传在这里继续append
                //eg :
                //formData.append(type,$("#fileName1")[0].files[0]);
                $.ajax({
                    type : "post",
                     headers: {
                       "Authorization":"3cad2695b8403693647ca66f28f80e4fa679fd0df43aaee6c8f15bc1ce9df8e1"
                      },
                    url : "http://127.0.0.1:9000/api/v1/upload",
                    data : formData,
                    processData : false,
                    contentType : false,
                    success : function(data){
                        if (data.status=="success") {
                            alert("文件上传成功");
                        }else{
                        alert("文件上传失败,请联系工作人员")
                    }}
                });
                }
    </script>
